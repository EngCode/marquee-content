{"mappings":"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","sources":["src/index.js"],"sourcesContent":["export default class MarqueeContent extends HTMLElement {\n    constructor() {\n        super();\n\n        this.gsap = MarqueeContent.gsap || window.gsap;\n        this.MM = this.gsap.matchMedia();\n        this.timeline = null;\n        this.update = this.update.bind(this);\n        this.resizeObserver = new ResizeObserver(this.debounce(this.update.bind(this), 150));\n        this.resizeObserver.observe(this);\n    }\n\n    static registerGSAP(gsap) {\n        MarqueeContent.gsap = gsap;\n    }\n\n    debounce(fn, delay) {\n        this.timer = null;\n\n        return (...args) => {\n            if (this.timer) clearTimeout(this.timer);\n            this.timer = setTimeout(() => fn(...args), delay);\n        };\n    }\n\n    breakpoints() {\n        this.breakpoint = '';\n\n        if (this.dataset.mcMax) {\n            this.breakpoint = `(max-width: ${this.dataset.mcMax - 0.02}px)`;\n        } else if (this.dataset.mcMin) {\n            this.breakpoint = `(min-width: ${this.dataset.mcMin}px)`;\n        }\n    }\n\n    templates() {\n        const wrapper = document.createElement('div');\n        wrapper.classList.add('marquee-wrapper');\n\n        const inner = document.createElement('div');\n        inner.classList.add('marquee-inner');\n        inner.style.display = 'inline-block';\n        inner.style.whiteSpace = 'nowrap';\n\n        while (this.firstChild) {\n            inner.appendChild(this.firstChild);\n        }\n\n        wrapper.appendChild(inner);\n        this.appendChild(wrapper);\n    }\n\n    cloning() {\n        const removingClones = () => {\n            while (this.childElementCount > 1) {\n                this.removeChild(this.lastChild);\n            }\n        };\n\n        removingClones();\n\n        this.MM.add(this.breakpoint, () => {\n            const requiredQuantity = Math.ceil(this.scrollWidth / this.firstElementChild.clientWidth + 2);\n\n            if (this.childElementCount < requiredQuantity) {\n                for (let i = 1; i < requiredQuantity; i += 1) {\n                    const cloned = this.firstElementChild;\n                    const clone = cloned.cloneNode(true);\n                    cloned.parentNode.append(clone);\n                }\n            }\n\n            return () => {\n                removingClones();\n            };\n        });\n    }\n\n    skewed() {\n        if (!this.dataset.mcSkew) return;\n\n        const abs = Math.abs(parseInt(this.dataset.mcSkew, 10));\n        const { style } = this;\n\n        this.MM.add(this.breakpoint, () => {\n            style.transformOrigin = 'center center';\n            style.transform = `skew(0deg, ${this.dataset.mcSkew}deg)`;\n            style.minHeight = `calc(${abs * 1.25}vh + ${abs * 1.25}vw)`;\n\n            return () => {\n                style.cssText = 'transform-origin: unset; transform: unset; min-height: unset;';\n            };\n        });\n    }\n\n    animation() {\n        if (this.timeline) {\n            this.timeline.kill();\n            this.timeline = null;\n        }\n\n        this.gsap.set(this.children, { clearProps: true });\n\n        this.MM.add(this.breakpoint, () => {\n            this.timeline = this.gsap.to(this.children, {\n                duration: this.dataset.mcDuration || 20,\n                x: '-100%',\n                ease: 'none',\n                repeat: -1,\n                scrollTrigger: {\n                    trigger: this,\n                    start: '-=50% bottom',\n                    end: 'bottom top',\n                    toggleActions: 'resume pause resume pause',\n                },\n            }).totalProgress(0.5);\n\n            const ltrDirection = () => {\n                this.gsap.to(this.timeline, {\n                    timeScale: -1,\n                    overwrite: true,\n                });\n            };\n\n            const autoDirection = () => {\n                let currentScroll = 0;\n                let scrollDirection = 1;\n\n                const handleScroll = () => {\n                    const orientation = (window.scrollY > currentScroll) ? 1 : -1;\n\n                    if (orientation !== scrollDirection) {\n                        this.gsap.to(this.timeline, {\n                            timeScale: orientation,\n                            overwrite: true,\n                        });\n\n                        scrollDirection = orientation;\n                    }\n\n                    currentScroll = window.scrollY;\n                };\n\n                window.addEventListener('scroll', handleScroll, { capture: true, passive: true });\n            };\n\n            if (this.dataset.mcDirection === 'ltr') {\n                ltrDirection();\n            } else if (this.dataset.mcDirection === 'auto') {\n                autoDirection();\n            }\n\n            return () => {\n                if (this.timeline) {\n                    this.timeline.kill();\n                    this.timeline = null;\n                }\n\n                this.gsap.set(this.children, { clearProps: true });\n            };\n        });\n    }\n\n    update() {\n        cancelAnimationFrame(this.af);\n\n        if (this.firstElementChild) {\n            this.af = requestAnimationFrame(() => {\n                this.cloning();\n                this.animation();\n            });\n        }\n    }\n\n    init() {\n        this.breakpoints();\n        this.templates();\n        this.skewed();\n        this.cloning();\n        this.animation();\n    }\n\n    connectedCallback() {\n        this.init();\n    }\n\n    disconnectedCallback() {\n        cancelAnimationFrame(this.af);\n\n        if (this.timeline) {\n            this.timeline.kill();\n            this.timeline = null;\n        }\n    }\n}\n\nif (!customElements.get('marquee-content')) {\n    customElements.define('marquee-content', MarqueeContent);\n}\n"],"names":[],"version":3,"file":"index.js.map"}