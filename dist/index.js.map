{"mappings":"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","sources":["src/index.js"],"sourcesContent":["export default class MarqueeContent extends HTMLElement {\n    constructor() {\n        super()\n\n        this.gsap = MarqueeContent.gsap || window.gsap\n        this.MM = this.gsap.matchMedia()\n        this.breakpoint = this.dataset.mcMax\n            ? `(max-width: ${this.dataset.mcMax - 0.02}px)`\n            : this.dataset.mcMin\n            ? `(min-width: ${this.dataset.mcMin}px)`\n            : ''\n\n        this.update = this.update.bind(this)\n        this.resizeObserver = new ResizeObserver(this.debounce(this.update.bind(this), 150))\n        this.resizeObserver.observe(this)\n    }\n\n    static registerGSAP(gsap) {\n        MarqueeContent.gsap = gsap\n    }\n\n    debounce(fn, delay) {\n        let timer\n\n        return (...args) => {\n            if (timer) clearTimeout(timer)\n            timer = setTimeout(() => fn(...args), delay)\n        }\n    }\n\n    templates() {\n        const wrapper = document.createElement('div')\n        wrapper.classList.add('marquee-wrapper')\n\n        const inner = document.createElement('div')\n        inner.classList.add('marquee-inner')\n        inner.style.display = 'inline-block'\n        inner.style.whiteSpace = 'nowrap'\n\n        while (this.firstChild) {\n            inner.appendChild(this.firstChild)\n        }\n\n        wrapper.appendChild(inner)\n        this.appendChild(wrapper)\n    }\n\n    cloning() {\n        const removingClones = () => {\n            while (this.childElementCount > 1) {\n                this.removeChild(this.lastChild)\n            }\n        }\n\n        removingClones()\n\n        this.MM.add(this.breakpoint, () => {\n            let requiredQuantity = Math.ceil(this.scrollWidth / this.firstElementChild.clientWidth + 2)\n\n            if (this.childElementCount < requiredQuantity) {\n                for (let i = 1; i < requiredQuantity; i++) {\n                    let cloned = this.firstElementChild\n                    let clone = cloned.cloneNode(true)\n                    cloned.parentNode.append(clone)\n                }\n            }\n\n            return () => {\n                removingClones()\n            }\n        })\n    }\n\n    skewed() {\n        if (!this.dataset.mcSkew) return\n\n        const abs = Math.abs(parseInt(this.dataset.mcSkew))\n        const style = this.style\n\n        this.MM.add(this.breakpoint, () => {\n            style.transformOrigin = 'center center'\n            style.transform = `skew(0deg, ${this.dataset.mcSkew}deg)`\n            style.minHeight = `calc(${abs * 1.25}vh + ${abs * 1.25}vw)`\n\n            return () => {\n                style.cssText = 'transform-origin: unset; transform: unset; min-height: unset;'\n            }\n        })\n    }\n\n    animation() {\n        let timeLine = this.gsap.timeline()\n\n        timeLine.kill()\n        timeLine = null\n\n        this.gsap.set(this.children, { clearProps: true })\n\n        this.MM.add(this.breakpoint, () => {\n            this.gsap.set(this.children, { 'will-change': 'transform' })\n\n            const tween = this.gsap.to(this.children, {\n                duration: this.dataset.mcDuration || 20,\n                x: '-100%',\n                ease: 'none',\n                repeat: -1,\n                scrollTrigger: {\n                    trigger: this,\n                    start: '-=50% bottom',\n                    end: 'bottom top',\n                    toggleActions: 'resume pause resume pause'\n                },\n            }).totalProgress(0.5)\n\n            const ltrDirection = () => {\n                this.gsap.to(tween, {\n                    timeScale: -1,\n                    overwrite: true\n                })\n            }\n\n            const autoDirection = () => {\n                let currentScroll = 0,\n                    scrollDirection = 1\n\n                const handleScroll = () => {\n                    let orientation = (window.pageYOffset > currentScroll) ? 1 : -1\n\n                    if (orientation !== scrollDirection) {\n                        this.gsap.to(tween, {\n                            timeScale: orientation,\n                            overwrite: true\n                        })\n\n                        scrollDirection = orientation\n                    }\n\n                    currentScroll = window.pageYOffset\n                }\n\n                addEventListener('scroll', () => {\n                    handleScroll()\n                }, { capture: true, passive: true })\n            }\n\n            if (this.dataset.mcDirection === 'ltr') {\n                ltrDirection()\n            } else if (this.dataset.mcDirection === 'auto') {\n                autoDirection()\n            }\n\n            return () => {\n                this.gsap.set(this.children, { clearProps: true })\n            }\n        })\n    }\n\n    update() {\n        cancelAnimationFrame(this.af)\n\n        if (this.firstElementChild) {\n            this.af = requestAnimationFrame(() => {\n                this.cloning()\n                this.animation()\n            })\n        }\n    }\n\n    connectedCallback() {\n        this.templates()\n        this.skewed()\n        this.cloning()\n        this.animation()\n    }\n\n    disconnectedCallback() {\n        cancelAnimationFrame(this.af)\n    }\n}\n\ncustomElements.get('marquee-content') || customElements.define('marquee-content', MarqueeContent)"],"names":[],"version":3,"file":"index.js.map"}