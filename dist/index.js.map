{"mappings":"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","sources":["src/index.js"],"sourcesContent":["export default class MarqueeContent extends HTMLElement {\n  constructor() {\n    super();\n\n    this.gsap = MarqueeContent.gsap || window.gsap;\n    this.MM = this.gsap.matchMedia();\n    this.timeline = null;\n    this.update = this.update.bind(this);\n    this.resizeObserver = new ResizeObserver(this.debounce(this.update.bind(this)));\n    this.resizeObserver.observe(this);\n  }\n\n  static registerGSAP(gsap) {\n    MarqueeContent.gsap = gsap;\n  }\n\n  debounce = () => {\n    let timer;\n\n    return () => {\n      cancelAnimationFrame(timer);\n      timer = requestAnimationFrame(this.update);\n    };\n  };\n\n  breakpoints() {\n    this.breakpoint = '';\n\n    if (this.dataset.mcMax) {\n      this.breakpoint = `(max-width: ${this.dataset.mcMax - 0.02}px)`;\n    } else if (this.dataset.mcMin) {\n      this.breakpoint = `(min-width: ${this.dataset.mcMin}px)`;\n    }\n  }\n\n  templates() {\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('marquee-wrapper');\n\n    const inner = document.createElement('div');\n    inner.classList.add('marquee-inner');\n    inner.style.display = 'inline-block';\n    inner.style.whiteSpace = 'nowrap';\n\n    while (this.firstChild) {\n      inner.appendChild(this.firstChild);\n    }\n\n    wrapper.appendChild(inner);\n    this.appendChild(wrapper);\n  }\n\n  cloning() {\n    const removingClones = () => {\n      while (this.childElementCount > 1) {\n        this.removeChild(this.lastChild);\n      }\n    };\n\n    removingClones();\n\n    this.MM.add(this.breakpoint, () => {\n      const requiredQuantity = Math.ceil(this.scrollWidth / this.firstElementChild.clientWidth + 2);\n\n      if (this.childElementCount < requiredQuantity) {\n        const clones = Array.from({ length: requiredQuantity - 1 }, () => this.firstElementChild.cloneNode(true));\n        this.append(...clones);\n      }\n\n      return removingClones;\n    });\n  }\n\n  skewed() {\n    if (!this.dataset.mcSkew) return;\n\n    const abs = Math.abs(parseInt(this.dataset.mcSkew, 10));\n    const { style } = this;\n\n    this.MM.add(this.breakpoint, () => {\n      style.transformOrigin = 'center center';\n      style.transform = `skew(0deg, ${this.dataset.mcSkew}deg)`;\n      style.minHeight = `calc(${abs * 1.25}vh + ${abs * 1.25}vw)`;\n\n      return () => {\n        style.cssText = 'transform-origin: unset; transform: unset; min-height: unset;';\n      };\n    });\n  }\n\n  clearTimeline() {\n    if (this.timeline) {\n      this.timeline.kill();\n      this.timeline = null;\n    }\n\n    this.gsap.set(this.children, { clearProps: true });\n  }\n\n  animation() {\n    if (this.timeline) {\n      this.clearTimeline.call(this);\n    }\n\n    this.MM.add(this.breakpoint, () => {\n      this.timeline = this.gsap.to(this.children, {\n        duration: this.dataset.mcDuration || 20,\n        x: '-100%',\n        ease: 'none',\n        repeat: -1,\n        scrollTrigger: {\n          trigger: this,\n          start: '-=50% bottom',\n          end: 'bottom top',\n          toggleActions: 'resume pause resume pause',\n          onUpdate: (self) => {\n            if (this.dataset.mcDirection === 'ltr') {\n              this.timeline.timeScale(-1);\n            } else if (this.dataset.mcDirection === 'auto') {\n              this.timeline.timeScale(self.direction);\n            }\n          },\n        },\n      });\n\n      this.timeline.totalProgress(0.5);\n\n      return () => {\n        if (this.timeline) {\n          this.clearTimeline.call(this);\n        }\n      };\n    });\n  }\n\n  update() {\n    cancelAnimationFrame(this.af);\n\n    if (this.firstElementChild) {\n      this.af = requestAnimationFrame(() => {\n        this.cloning();\n        this.animation();\n      });\n    }\n  }\n\n  init() {\n    this.breakpoints();\n    this.templates();\n    this.skewed();\n    this.cloning();\n    this.animation();\n  }\n\n  connectedCallback() {\n    this.init();\n  }\n\n  disconnectedCallback() {\n    cancelAnimationFrame(this.af);\n\n    this.clearTimeline();\n\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n  }\n}\n\nif (!customElements.get('marquee-content')) {\n  customElements.define('marquee-content', MarqueeContent);\n}\n"],"names":[],"version":3,"file":"index.js.map"}