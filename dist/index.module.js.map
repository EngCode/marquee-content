{"mappings":"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","sources":["src/index.js"],"sourcesContent":["export default class MarqueeContent extends HTMLElement {\n    constructor(query) {\n        super()\n\n        this.gsap = MarqueeContent.gsap || window.gsap\n        this.MM = this.gsap.matchMedia(query)\n        this.dataSkew = this.dataset.mcSkew\n        this.dataDuration = this.dataset.mcDuration || 20\n        this.dataDirection = this.dataset.mcDirection\n        this.dataMaxWidth = this.dataset.mcMax\n        this.dataMinWidth = this.dataset.mcMin\n        this.breakpoint = this.dataMaxWidth\n            ? `(max-width: ${this.dataMaxWidth - 0.02}px)`\n            : this.dataMinWidth\n                ? `(min-width: ${this.dataMinWidth}px)`\n                : ''\n    }\n\n    static registerGSAP(gsap) {\n        MarqueeContent.gsap = gsap\n    }\n\n    debounce(fn, delay) {\n        let timer\n\n        return (...args) => {\n            if (timer) clearTimeout(timer)\n            timer = setTimeout(() => fn(...args), delay)\n        }\n    }\n\n    templates() {\n        const div = document.createElement('div')\n\n        div.style.display = 'inline-block'\n        div.style.whiteSpace = 'nowrap'\n\n        while (this.firstChild) {\n            div.appendChild(this.firstChild)\n        }\n\n        this.appendChild(div)\n    }\n\n    cloning() {\n        const removingClones = () => {\n            while (this.childElementCount > 1) {\n                this.removeChild(this.lastChild)\n            }\n        }\n\n        removingClones()\n\n        this.MM.add(this.breakpoint, () => {\n            let requiredQuantity = Math.ceil(this.scrollWidth / this.firstElementChild.clientWidth + 2)\n\n            if (this.childElementCount < requiredQuantity) {\n                for (let i = 1; i < requiredQuantity; i++) {\n                    let cloned = this.firstElementChild\n                    let clone = cloned.cloneNode(true)\n                    cloned.parentNode.append(clone)\n                }\n            }\n\n            return () => {\n                removingClones()\n            }\n        })\n    }\n\n    skewed() {\n        if (!this.dataSkew) return\n\n        const abs = Math.abs(parseInt(this.dataSkew))\n        const style = this.style\n\n        this.MM.add(this.breakpoint, () => {\n            style.transformOrigin = 'center center'\n            style.transform = `skew(0deg, ${this.dataSkew}deg)`\n            style.minHeight = `calc(${abs * 1.25}vh + ${abs * 1.25}vw)`\n\n            return () => {\n                style.cssText = 'transform-origin: unset; transform: unset; min-height: unset;'\n            }\n        })\n    }\n\n    animation() {\n        let timeLine = this.gsap.timeline()\n\n        timeLine.kill()\n        timeLine = null\n\n        this.gsap.set(this.children, { clearProps: true })\n\n        this.MM.add(this.breakpoint, () => {\n            this.gsap.set(this.children, { 'will-change': 'transform' })\n\n            const tween = this.gsap.to(this.children, {\n                duration: this.dataDuration,\n                x: '-100%',\n                ease: 'none',\n                repeat: -1,\n                scrollTrigger: {\n                    trigger: this,\n                    start: '-=50% bottom',\n                    end: 'bottom top',\n                    toggleActions: 'resume pause resume pause',\n                },\n            }).totalProgress(0.5)\n\n            const ltrDirection = () => {\n                this.gsap.to(tween, {\n                    timeScale: -1,\n                    overwrite: true\n                })\n            }\n\n            const autoDirection = () => {\n                let previousScrollPosition = 0\n\n                const isScrollingDown = () => {\n                    const scrollPosition = window.pageYOffset || document.documentElement.scrollTop\n\n                    let direction = false\n\n                    if (scrollPosition > previousScrollPosition) {\n                        direction = true\n                    } else if (scrollPosition < previousScrollPosition) {\n                        direction = false\n                    }\n\n                    previousScrollPosition = scrollPosition <= 0 ? 0 : scrollPosition\n\n                    return direction\n                }\n\n                addEventListener('scroll', this.debounce(() => {\n                    const scrollDirection = isScrollingDown()\n\n                    this.gsap.to(tween, {\n                        timeScale: scrollDirection ? 1 : -1,\n                        overwrite: true,\n                    })\n                }, 50), {\n                    capture: true, passive: true\n                })\n            }\n\n            if (this.dataDirection === 'ltr') {\n                ltrDirection()\n            } else if (this.dataDirection === 'auto') {\n                autoDirection()\n            }\n\n            return () => {\n                this.gsap.set(this.children, { clearProps: true })\n            }\n        })\n    }\n\n    onResize() {\n        cancelAnimationFrame(this.af)\n\n        this.af = requestAnimationFrame(() => {\n            this.cloning()\n            this.animation()\n        })\n    }\n\n    onUpdate() {\n        this.templates()\n        this.cloning()\n        this.skewed()\n        this.animation()\n\n        this.onResize = this.onResize.bind(this)\n        this.resizeObserver = new ResizeObserver(this.debounce(this.onResize.bind(this), 150))\n        this.resizeObserver.observe(this)\n    }\n\n    connectedCallback() {\n        this.onUpdate()\n    }\n\n    disconnectedCallback() {\n        document.fonts.removeEventListener('loadingdone', this.onUpdate)\n    }\n}\n\ncustomElements.define('marquee-content', MarqueeContent)"],"names":[],"version":3,"file":"index.module.js.map"}